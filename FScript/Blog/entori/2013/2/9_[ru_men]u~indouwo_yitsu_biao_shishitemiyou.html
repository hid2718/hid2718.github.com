<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <meta name="Generator" content="iWeb 3.0.4" />
    <meta name="iWeb-Build" content="local-build-20130619" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>［入門］ウィンドウを表示して、その透明度を変える</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyouIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='../../../../Media/IE8.css'/><![endif]-->
    <script language="javascript" type="text/javascript"><!--

iWebBlogMainPageName = 'Blog.html';
iWebBlogMainPageTitle = 'Blog';
iWebBlogArchivePageName = 'akaibu.html';
iWebBlogArchivePageTitle = 'アーカイブ';


--></script>
    <script type="text/javascript" src="../../../../Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="../../../../Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="http://www.me.com/1/up/comments/scripts/search.js"></script>
    <script type="text/javascript" src="../../../../Scripts/iWebBlog.js"></script>
    <script type="text/javascript" src="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 35px; margin-top: 0px; opacity: 1.00; position: relative; width: 630px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', '../../../../Scripts/Widgets/Navbar', '../../../../Scripts/Widgets/SharedResources', '../../../..', {"path-to-root": "..\/..\/..\/..\/", "navbar-css": ".navbar {\n\tfont-family: Arial, sans-serif;\n\tfont-size: 1em;\n\tcolor: #666;\n\tmargin: 9px 0px 6px 0px;\n\tline-height: 30px;\n}\n\n.navbar-bg {\n\ttext-align: center;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:hover\r{\r\n \tcolor: #463C3C;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #463C3C;\n\ttext-decoration: none;\n\tfont-weight: bold;\r\r}", "current-page-GUID": "A8ED8FB8-BF74-4FF0-9BD0-4C361C3330FA", "isCollectionPage": "YES"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 100px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; width: 630px;  height: 1px; left: 35px; position: absolute; top: 3px; width: 630px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 630px; ">
              <img src="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/shapeimage_1.jpg" alt="" style="height: 1px; left: 0px; position: absolute; top: 0px; width: 630px; " />
            </div>
          </div>
          


          <div style="height: 1px; width: 630px;  height: 1px; left: 36px; position: absolute; top: 120px; width: 630px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 630px; ">
              <img src="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/shapeimage_2.jpg" alt="" style="height: 1px; left: 0px; position: absolute; top: 0px; width: 630px; " />
            </div>
          </div>
          


          <div id="id1" style="height: 77px; left: 35px; position: absolute; top: 23px; width: 630px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content Normal_External_630_77" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-top: 0pt; " class="paragraph_style">  F-Script で遊んでみよう！<br /></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_1">Let’s play with F-Script !</p>
              </div>
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id2" style="visibility: hidden;  height: 34px; left: 31px; position: absolute; top: 356px; width: 637px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content Normal_External_637_34" style="padding: 0px; ">
              <div class="Normal">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_2">［入門］ウィンドウを表示して、その透明度を変える</p>
              </div>
            </div>
            <div id="generic-title-attributes" class="Title"></div>
          </div>
          <div style="height: 1px; line-height: 1px; " class="tinyText"> </div>
          <div style="visibility: hidden;  margin-left: 34px; margin-top: 416px; position: relative; width: 633px; z-index: 1; " class="style_SkipStroke_2 shape-with-text flowDefining">
            <div class="text-content style_External_633_2039" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_3">■ ウィンドウを一つ創って表示する<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">F-Script.app を起動して、F-Script コンソールに以下のように入力してみよう。<br /></p>
                <p class="paragraph_style_4">まず、ウィンドウのインスタンスを一つ創る：<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">    &gt; aWin := NSWindow alloc initWithContentRect: (100&lt;&gt;100 extent:300&lt;&gt;200) <br /></p>
                <p class="paragraph_style_4">                                           styleMask: NSTitledWindowMask+NSClosableWindowMask<br /></p>
                <p class="paragraph_style_4">                                           backing: NSBackingStoreBuffered                                    <br /></p>
                <p class="paragraph_style_5">                                           defer: NO                                                                        <br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">これで、ウィンドウのインスタンスができて、変数 aWin に代入（束縛）された。<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">上記の文は、本来、一行に書かれるべき内容だが、任意の区切り箇所で改行することができる。その場合、「return」キーを押すと「実行」と解釈されてしまうので注意しよう。実行せずに「改行」したい場合は、「Ctrl」キーを押しながら「return」を押す。最後の ... defer: NO の後だけは、「実行」の「return」だ。<br /></p>
                <p class="paragraph_style_6">また、読み易くする為の空白は任意の数だけ入力してよい。<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">これを画面に表示するには、この変数 aWin に以下のメッセージを送る：<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6"><span class="style_1">    </span>&gt; aWin orderFront: nil<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">これで、ウィンドウが一つ画面に表示されるはずだ。<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_7">■ ウィンドウの透明度を変える<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">以下のようにすることで、ウィンドウ全体の透明度を変えることができる：<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6"><span class="style_1">    </span>&gt; aWin setAlphaValue: 0.5<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_4">メッセージ <span class="style_2">setAlphaValue: には、引数として、透明度を表す 0.0 ~ 1.0 の値を渡す。0.0 で完全に透明になり、1.0 で完全に不透明になる。デフォルト値は 1.0（完全な不透明）だ。<br /></span></p>
                <p class="paragraph_style_4"><span class="style_2"><br /></span></p>
                <p class="paragraph_style_6">ついでに、このウィンドウのタイトルバーにタイトルも設定してみよう：<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6"><span class="style_1">    </span>&gt; aWin setTitle: '初めてのウィンドウ'<br /></p>
                <p class="paragraph_style_6"><br /></p>
                <p class="paragraph_style_6">前回の記事にも書いたように、F-Script コンソールの入力中に日本語変換を行うと、その確定操作の「改行」が、「実行」と解釈されてしまい、うまく日本語入力ができない。しかし事前に、別のエディタ等で入力する日本語文字列を用意しておき、それをコピペする分には問題はない。今回は、上記の行をそのままコピペすると良い。<br /></p>
                <p class="paragraph_style_4"><span class="style_2"> <br /></span></p>
                <p class="paragraph_style_3"><span class="style_2">■ 何をしているのか：文法的な解説<br /></span></p>
                <p class="paragraph_style_4"><span class="style_2"><br /></span></p>
                <p class="paragraph_style_4"><span class="style_2">こんな短いコードでも、学べることがたくさんある。</span><br /></p>
                <p class="paragraph_style_4">このコードは、全体としては、Cocoa が提供する ApplicationKit.framework で定義された NSWindow クラスのインスタンスを一つ創り、それに対して自分自身を画面に表示させるメッセージを送っている。その後で、さらに、タイトルを設定するメッセージや、透明度を設定するメッセージも送った。<span class="style_2">このコードがやっていることを、少し踏み込んで見てみよう。</span>Objective-C との違いに焦点を当ててみる。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">Objective-C との対比で見た場合、文法上のポイントは次の通り。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">    ・#import &lt;Foundation/Foundation.h&gt; #import &lt;AppKit/AppKit.h&gt; 等の宣言は不要<br /></p>
                <p class="paragraph_style_4">    ・変数と代入<br /></p>
                <p class="paragraph_style_4">    ・メッセージ式に［］は不要<br /></p>
                <p class="paragraph_style_4">    ・全ての Cocoa クラスとそれらのメッセージは（ほぼ全て）そのまま使える<br /></p>
                <p class="paragraph_style_4">    ・各 Cocoa クラスで定義された各種 Cocoa 定数がそのまま使える<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">以下に一つずつ説明しよう。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_8">１）#import &lt;Foundation/Foundation.h&gt;、#import &lt;AppKit/AppKit.h&gt; 等の宣言は不要<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">F-Script.app は一つの Cocoa アプリケーションであり、起動時に４０個もの Cocoa フレームワークをリンクして、それぞれに必要なヘッダーファイルを既に #import している。 F-Script.app 内部の F-Script インタプリタは、これらのフレームワークとヘッダーファイルにある各種定義に常時アクセスできるのだ。<br /></p>
                <p class="paragraph_style_4">従って、F-Script でコードを書く際は、これらフレームワークやヘッダーファイルを改めて読み込む必要はない。<br /></p>
                <p class="paragraph_style_4">上記のコードに「 NSTitledWindowMask」や「NSClosableWindowMask」等の Cocoa 定数をそのまま使えるのも同じ理由からだ。これらの定数は、読み込み済みのフレームワークのヘッダーファイルの内部で定義されている。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">起動時に読み込まれるフレームワークにはどのようなものがあるのか、そのリストが チュートリアル <span class="style_3">7. </span><a title="http://hid2718.github.com/FScript/AccessingMacOSXFrameworksWithFScript-index-ja.html" href="http://hid2718.github.com/FScript/AccessingMacOSXFrameworksWithFScript-index-ja.html" class="style_4">F-Script で Mac OS X のフレームワーク群にアクセスする</a> に掲載されている。しかし、これらは Cocoa の提供する膨大なフレームワークのごく一部に過ぎない。これ以外のフレームワークを利用したい場合は、明示的にそのフレームワークを読み込む必要がある。同じチュートリアルに、その読み込み方法についての具体的な説明がある。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_8">２）変数と代入： aWin := ...<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">F-Script では、特別な型指定をしない限り、変数は全て「id 型」で、宣言無しでいきなり使える。また、代入は、「=」ではなく「:=」で表す。これらは Smalltalk と同じだ。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">ただし、F-Script は Objective-C と全く同様に「Objective-C ランタイム」を使って動いている為、Objective-C で書かれた各種フレームワークとの遣り取りが必要なメソッドを使用する際には、Objective-C とのマッピングの為に明示的な型指定が必要になる。例えば、NSView クラスを継承して独自クラスを作る場合がそうだ。その再描画を司るメソッドである「drawRect:」周りは、これが、Objective-C のフレームワークからコールバックされる為、引数、戻り値共に、明示的な型指定が必要となる。<br /></p>
                <p class="paragraph_style_4">この点については、チュートリアル 4. <a onclick="window.open(this.href); return false;" title="http://hid2718.github.io/FScript/CreatingCocoaClassesWithFScript-index-ja.html" href="http://hid2718.github.io/FScript/CreatingCocoaClassesWithFScript-index-ja.html" onkeypress="window.open(this.href); return false;">F-Script で Cocoa クラスを創る</a> の「さらにメソッドについて」の節に詳しい解説がある。また、F-Script Guide の <a onclick="window.open(this.href); return false;" title="http://hid2718.github.io/FScript/F-Script-Guide-ja/F-Script-Guide-1-16-ja.html#mozTocId433866" href="http://hid2718.github.io/FScript/F-Script-Guide-ja/F-Script-Guide-1-16-ja.html#mozTocId433866" onkeypress="window.open(this.href); return false;">15 Objective-C マッピング の節</a> も合わせて参照するとよい。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_8">３）メッセージ式に［］は不要： NSWindow alloc initWithContentRect: ...<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_4">Objective-C では「メッセージ式」は［］で括って表し、普通のCのコードとは分離して扱われるが、F-Script では、Smalltalk と同様「全てがメッセージ式」であり、メッセージ式に［］は使わない。<br /></p>
                <p class="paragraph_style_4">Objective-C で [ [ Object message1 ] message2 ] という式は、単に Object message1 message2 となる。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_8">４）全ての Cocoa クラスとそれらのメッセージは（ほぼ全て）そのまま使える<br /></p>
                <p class="paragraph_style_9"><br /></p>
                <p class="paragraph_style_4">F-Script は、そのインタプリタを通して Objective-C のランタイムを使って Cocoa にアクセスする。その為、Cocoa から見ると、そのアクセスが Objective-C からのものなのか F-Script からのものなのか区別がつかない。<br /></p>
                <p class="paragraph_style_4">つまり、F-Script は、Objective-C で利用可能な Cocoa の機能を（ほぼ全て）そのまま使えると考えて良い。<br /></p>
                <p class="paragraph_style_4"><br /></p>
                <p class="paragraph_style_10">※ 但し、F-Script インタプリタは 純粋に Smalltalk の仕様に沿って作られている為、それが Smalltalk 的に見ると「変な」構文であるが故に F-Script からは利用できない、というメソッドが一部存在する。例えば、NSArray クラスのクラスメソッド「arrayWithObjects:」は、その一例である。このメソッドの仕様は、その引数（: の後ろ）に 複数のオブジェクトを「,」で区切って複数並べて指定する、というものだが、Smalltalk では、こうした引数の仕様はあり得ない。Smalltalk では、こうした場合、引数を「オブジェクトの配列」として、あくまでも一つのオブジェクトとして渡すような仕様になっている。<br /></p>
                <p class="paragraph_style_9"><br /></p>
              </div>
              <div style="height: 12px; line-height: 12px; " class="tinyText"> </div>
            </div>
            <div id="generic-body-attributes" class="Body"></div>
          </div>
          


          <div id="id3" style="visibility: hidden;  height: 24px; left: 33px; position: absolute; top: 389px; width: 635px; z-index: 1; " class="style_SkipStroke_3 shape-with-text">
            <div class="text-content style_External_635_24" style="padding: 0px; ">
              <div class="style">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style_11">2013年2月9日土曜日</p>
              </div>
            </div>
            <div id="generic-datefield-attributes" class="Date"></div>
          </div>
          


          <div style="height: 301px; width: 626px;  height: 301px; left: 38px; position: absolute; top: 39px; width: 626px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 626px; ">
              <img src="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/shapeimage_3.png" alt="" style="height: 301px; left: 0px; position: absolute; top: 0px; width: 626px; visibility: hidden; " id="generic-picture-attributes" />
            </div>
          </div>
          <div style="height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <a href="http://apple.com/jp/mac" title="http://apple.com/jp/mac"><img src="9_%5Bru_men%5Du%7Eindouwo_yitsu_biao_shishitemiyou_files/mwmac.png" alt="Made on a Mac" style="border: none; height: 50px; left: 280px; opacity: 0.35; position: absolute; top: 80px; width: 139px; z-index: 1; " id="id4" />

</a>
          <div id="id5" style="height: 30px; left: 350px; position: absolute; top: 10px; width: 315px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_315_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Next"><a class="iWebBlogNext" title="" href=""><span style="font-family: 'HiraKakuProN-W3', 'Hiragino Kaku Gothic ProN'; font-size: 15px; font-stretch: normal; font-style: normal; font-weight: 300; line-height: 28px; ">次へ</span> &gt;</a></p>
              </div>
            </div>
          </div>
          


          <div id="id6" style="height: 30px; left: 35px; position: absolute; top: 10px; width: 315px; z-index: 1; " class="style_SkipStroke_4 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_315_30" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="Previous"><a class="iWebBlogPrev" title="" href="">&lt; 前ヘ</a></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


